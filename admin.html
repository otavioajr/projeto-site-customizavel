<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Aventuras</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100vh;
      --spacing-md: 1.5rem;
      --spacing-lg: 3rem;
    }

    .admin-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      height: 100vh;
      gap: 0;
    }

    .admin-editor {
      background: var(--color-bg);
      padding: var(--spacing-sm);
      overflow-y: auto;
      max-height: 100vh;
    }

    .admin-preview {
      background: var(--color-gray);
      position: sticky;
      top: 0;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .admin-header {
      background: var(--color-primary);
      color: var(--color-white);
      padding: var(--spacing-sm) var(--spacing-md);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .admin-header h1 {
      font-size: 1.5rem;
      margin: 0;
    }

    .admin-header a {
      color: var(--color-white);
      text-decoration: underline;
    }

    .admin-tabs {
      display: flex;
      gap: var(--spacing-xs);
      margin-bottom: var(--spacing-md);
      border-bottom: 2px solid var(--color-gray);
    }

    .admin-tab {
      padding: var(--spacing-sm) var(--spacing-md);
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      color: var(--color-gray-dark);
      transition: var(--transition);
      border-bottom: 3px solid transparent;
    }

    .admin-tab.active {
      color: var(--color-primary);
      border-bottom-color: var(--color-primary);
    }

    .admin-tab:hover {
      color: var(--color-primary);
    }

    .admin-section {
      display: none;
      animation: fadeIn 0.3s;
    }

    .admin-section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .form-group {
      margin-bottom: var(--spacing-sm);
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: var(--spacing-xs);
      color: var(--color-text);
    }

    .form-hint {
      display: block;
      font-size: 0.875rem;
      color: var(--color-gray-dark);
      margin-top: 4px;
      line-height: 1.4;
      background: #f8f9fa;
      padding: 8px 10px;
      border-radius: 4px;
      border-left: 3px solid var(--color-primary);
    }
    
    .form-hint a {
      color: var(--color-primary);
      text-decoration: underline;
      font-weight: 600;
    }
    
    .form-hint a:hover {
      color: var(--color-secondary);
    }

    .form-group input[type="text"],
    .form-group input[type="url"],
    .form-group input[type="email"],
    .form-group input[type="number"],
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: var(--spacing-sm);
      border: 1px solid var(--color-gray);
      border-radius: var(--border-radius);
      font-size: 1rem;
      font-family: inherit;
      transition: var(--transition);
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(14, 124, 123, 0.1);
    }

    .form-group textarea {
      min-height: 100px;
      resize: vertical;
    }

    .form-group input[type="color"] {
      width: 80px;
      height: 40px;
      border: 1px solid var(--color-gray);
      border-radius: var(--border-radius);
      cursor: pointer;
    }

    .color-picker-group {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-sm);
    }

    .color-picker-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }

    .color-picker-item label {
      margin: 0;
      flex: 1;
    }

    .subsection {
      background: var(--color-white);
      border-radius: var(--border-radius);
      margin-bottom: var(--spacing-sm);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .subsection-toggle {
      width: 100%;
      background: none;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      color: var(--color-primary);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.85rem 1.2rem;
      cursor: pointer;
      transition: var(--transition);
      text-align: left;
      gap: var(--spacing-xs);
    }

    .subsection-toggle:hover,
    .subsection-toggle:focus-visible {
      background: var(--color-gray-light);
      outline: none;
    }

    .subsection-toggle-icon {
      font-size: 1.25rem;
      line-height: 1;
      transition: transform 0.2s ease;
    }

    .subsection-content {
      padding: var(--spacing-sm) var(--spacing-md);
      border-top: 1px solid var(--color-gray-light);
      background: var(--color-white);
    }

    .subsection.collapsed .subsection-content {
      display: none;
    }

    .subsection.collapsed .subsection-toggle-icon {
      transform: rotate(180deg);
    }

    .subsection-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--color-primary);
      margin: 0;
    }

    .btn-group {
      display: flex;
      gap: var(--spacing-sm);
      margin-top: var(--spacing-md);
    }

    .btn-small {
      padding: var(--spacing-xs) var(--spacing-sm);
      font-size: 0.875rem;
    }

    .btn-danger {
      background: #E53E3E;
      color: var(--color-white);
    }

    .btn-danger:hover {
      background: #C53030;
    }

    .list-item {
      background: var(--color-gray-light);
      padding: var(--spacing-sm);
      border-radius: var(--border-radius);
      margin-bottom: var(--spacing-sm);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .list-item-info {
      flex: 1;
    }

    .list-item-actions {
      display: flex;
      gap: var(--spacing-xs);
    }

    .preview-container {
      flex: 1;
      background: var(--color-white);
      position: relative;
      overflow: hidden;
    }

    .preview-label {
      background: var(--color-secondary);
      color: var(--color-white);
      padding: var(--spacing-xs) var(--spacing-sm);
      text-align: center;
      font-weight: 600;
      font-size: 0.875rem;
    }

    #preview-frame {
      width: 100%;
      height: 100%;
      border: none;
    }

    .array-item {
      background: var(--color-gray-light);
      padding: var(--spacing-sm);
      border-radius: var(--border-radius);
      margin-bottom: var(--spacing-sm);
      position: relative;
    }

    .array-item-remove {
      position: absolute;
      top: var(--spacing-xs);
      right: var(--spacing-xs);
      background: #E53E3E;
      color: white;
      border: none;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      cursor: pointer;
      font-weight: bold;
      line-height: 1;
    }

    .array-item-remove:hover {
      background: #C53030;
    }

    .page-item {
      background: var(--color-white);
      padding: var(--spacing-sm);
      border-radius: var(--border-radius);
      margin-bottom: var(--spacing-sm);
      border: 1px solid var(--color-gray);
    }

    .page-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-xs);
    }

    .page-item-title {
      font-weight: 600;
      color: var(--color-primary);
    }

    .page-item-meta {
      font-size: 0.875rem;
      color: var(--color-gray-dark);
      margin-bottom: var(--spacing-xs);
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--color-gray);
      transition: 0.3s;
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--color-primary);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(24px);
    }

    .alert {
      padding: var(--spacing-sm);
      border-radius: var(--border-radius);
      margin-bottom: var(--spacing-md);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }

    .alert-icon {
      font-weight: bold;
      font-size: 1.1em;
      min-width: 20px;
      text-align: center;
    }

    .alert-success {
      background: #C6F6D5;
      color: #22543D;
      border: 1px solid #9AE6B4;
    }

    .alert-error {
      background: #FED7D7;
      color: #742A2A;
      border: 1px solid #FC8181;
    }

    .alert-warning {
      background: #FEFCBF;
      color: #744210;
      border: 1px solid #F6E05E;
    }

    .alert-info {
      background: #BEE3F8;
      color: #2A4365;
      border: 1px solid #90CDF4;
    }

    #alert-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 10000;
      max-width: 400px;
    }

    .form-field-item {
      background: var(--color-gray-light);
      padding: var(--spacing-sm);
      border-radius: var(--border-radius);
      margin-bottom: var(--spacing-sm);
      position: relative;
      border-left: 3px solid var(--color-primary);
    }

    .form-field-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-xs);
    }

    .form-field-item-title {
      font-weight: 600;
      color: var(--color-primary);
    }

    .form-field-actions {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .btn-reorder {
      background: var(--color-primary);
      color: white;
      border: none;
      border-radius: 4px;
      width: 28px;
      height: 28px;
      cursor: pointer;
      font-size: 0.875rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .btn-reorder:hover:not(:disabled) {
      background: var(--color-secondary);
      transform: scale(1.05);
    }

    .btn-reorder:disabled {
      background: var(--color-gray);
      cursor: not-allowed;
      opacity: 0.5;
    }

    .form-field-item select {
      width: 100%;
      padding: var(--spacing-xs);
      border: 1px solid var(--color-gray);
      border-radius: var(--border-radius);
      margin-bottom: var(--spacing-xs);
    }

    /* Inscri√ß√µes */
    .inscriptions-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-lg);
    }

    .stat-card {
      background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
      color: var(--color-white);
      padding: var(--spacing-md);
      border-radius: var(--border-radius);
      text-align: center;
    }

    .stat-card h4 {
      margin: 0 0 var(--spacing-xs) 0;
      font-size: 0.875rem;
      opacity: 0.9;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: bold;
      margin: 0;
    }

    .inscriptions-filters {
      display: grid;
      grid-template-columns: 1fr 1fr 2fr auto auto;
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-md);
      align-items: end;
    }

    .inscriptions-table-container {
      overflow-x: auto;
      background: var(--color-white);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
    }

    .inscriptions-table {
      width: 100%;
      border-collapse: collapse;
    }

    .inscriptions-table th {
      background: var(--color-primary);
      color: var(--color-white);
      padding: var(--spacing-sm);
      text-align: left;
      font-weight: 600;
      position: sticky;
      top: 0;
    }

    .inscriptions-table td {
      padding: var(--spacing-sm);
      border-bottom: 1px solid var(--color-gray);
    }

    .inscriptions-table tbody tr:hover {
      background: var(--color-gray-light);
    }

    .inscription-status {
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.875rem;
      font-weight: 600;
      display: inline-block;
    }

    .inscription-status.pending {
      background: #FED7D7;
      color: #742A2A;
    }

    .inscription-status.confirmed {
      background: #C6F6D5;
      color: #22543D;
    }

    .inscription-data {
      font-size: 0.875rem;
      max-width: 300px;
    }

    .inscription-data-item {
      margin-bottom: 4px;
    }

    .inscription-data-label {
      font-weight: 600;
      color: var(--color-primary);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      animation: fadeIn 0.3s;
    }

    .modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: var(--color-white);
      border-radius: var(--border-radius);
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      animation: slideUp 0.3s;
    }

    .modal-header {
      background: var(--color-primary);
      color: var(--color-white);
      padding: var(--spacing-md);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h3 {
      margin: 0;
      font-size: 1.25rem;
    }

    .modal-close {
      background: transparent;
      border: none;
      color: var(--color-white);
      font-size: 2rem;
      cursor: pointer;
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: var(--transition);
    }

    .modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .modal-body {
      padding: var(--spacing-lg);
      max-height: calc(80vh - 80px);
      overflow-y: auto;
    }

    .modal-data-item {
      margin-bottom: var(--spacing-md);
      padding-bottom: var(--spacing-md);
      border-bottom: 1px solid var(--color-gray);
    }

    .modal-data-item:last-child {
      border-bottom: none;
    }

    .modal-data-label {
      font-weight: 600;
      color: var(--color-primary);
      display: block;
      margin-bottom: var(--spacing-xs);
      font-size: 0.875rem;
      text-transform: uppercase;
    }

    .modal-data-value {
      font-size: 1rem;
      color: var(--color-text);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from {
        transform: translateY(50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    /* Images Section */
    .images-upload-area {
      border: 2px dashed var(--color-primary);
      border-radius: var(--border-radius);
      padding: var(--spacing-lg);
      text-align: center;
      background: var(--color-gray-light);
      cursor: pointer;
      transition: var(--transition);
      margin-bottom: var(--spacing-md);
    }

    .images-upload-area:hover {
      background: var(--color-white);
      border-color: var(--color-secondary);
    }

    .images-upload-area.dragover {
      background: var(--color-white);
      border-color: var(--color-secondary);
      transform: scale(1.02);
    }

    .upload-icon {
      font-size: 3rem;
      margin-bottom: var(--spacing-sm);
    }

    .images-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: var(--spacing-md);
    }

    .image-card {
      background: var(--color-white);
      border-radius: var(--border-radius);
      padding: var(--spacing-sm);
      box-shadow: var(--shadow);
      transition: var(--transition);
      position: relative;
    }

    .image-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .image-preview {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: var(--border-radius);
      margin-bottom: var(--spacing-xs);
      background: var(--color-gray-light);
    }

    .image-name {
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: var(--spacing-xs);
      word-break: break-all;
      font-size: 0.875rem;
    }

    .image-info {
      font-size: 0.75rem;
      color: var(--color-gray-dark);
      margin-bottom: var(--spacing-xs);
    }

    .image-actions {
      display: flex;
      gap: var(--spacing-xs);
    }

    .copy-name-btn {
      flex: 1;
      padding: var(--spacing-xs);
      background: var(--color-primary);
      color: var(--color-white);
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 0.875rem;
      transition: var(--transition);
    }

    .copy-name-btn:hover {
      background: var(--color-secondary);
    }

    .delete-image-btn {
      padding: var(--spacing-xs) var(--spacing-sm);
      background: #E53E3E;
      color: var(--color-white);
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 0.875rem;
      transition: var(--transition);
    }

    .delete-image-btn:hover {
      background: #C53030;
    }

    .images-info-box {
      background: #E6F7FF;
      border-left: 4px solid #1890FF;
      padding: var(--spacing-md);
      border-radius: var(--border-radius);
      margin-bottom: var(--spacing-md);
    }

    .images-info-box h4 {
      margin: 0 0 var(--spacing-xs) 0;
      color: #1890FF;
    }

    .images-info-box p {
      margin: var(--spacing-xs) 0;
      font-size: 0.875rem;
      line-height: 1.5;
    }

    .images-info-box code {
      background: rgba(0, 0, 0, 0.05);
      padding: 2px 6px;
      border-radius: 3px;
      font-family: monospace;
      color: #C41D7F;
    }

    @media (max-width: 1024px) {
      .admin-container {
        grid-template-columns: 1fr;
      }

      .admin-preview {
        position: relative;
        height: 600px;
      }

      .images-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      }
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <!-- Editor (Esquerda) -->
    <div class="admin-editor">
      <div class="admin-header">
        <h1>üé® Admin</h1>
        <div style="display: flex; gap: 15px; align-items: center;">
          <button id="clear-cache-btn" class="btn-secondary" style="padding: 0.5rem 1rem; cursor: pointer;">üóëÔ∏è Limpar Cache</button>
          <a href="/" target="_blank">Ver Site ‚Üí</a>
        </div>
      </div>

      <!-- Alert -->
      <div id="alert-container"></div>

      <!-- Tabs -->
      <div class="admin-tabs">
        <button class="admin-tab active" data-tab="home">Home</button>
        <button class="admin-tab" data-tab="pages">P√°ginas</button>
        <button class="admin-tab" data-tab="inscriptions">Inscri√ß√µes</button>
        <button class="admin-tab" data-tab="images">Imagens</button>
        <button class="admin-tab" data-tab="theme">Tema</button>
      </div>

      <!-- Home Section -->
      <div class="admin-section active" id="section-home">
        <!-- Hero -->
        <div class="subsection">
          <h3 class="subsection-title">Hero</h3>
          <div class="form-group">
            <label for="hero-title">T√≠tulo <span style="color: red;">*</span></label>
            <input type="text" id="hero-title" placeholder="Viva a aventura com seguran√ßa">
            <span class="form-hint">üìù Texto principal que aparece no topo da p√°gina (obrigat√≥rio)</span>
          </div>
          <div class="form-group">
            <label for="hero-subtitle">Subt√≠tulo <span style="color: red;">*</span></label>
            <textarea id="hero-subtitle" placeholder="Guias certificados..."></textarea>
            <span class="form-hint">üìù Descri√ß√£o complementar abaixo do t√≠tulo (obrigat√≥rio)</span>
          </div>
          <div class="form-group">
            <label for="hero-cta-label">Texto do Bot√£o <span style="color: red;">*</span></label>
            <input type="text" id="hero-cta-label" placeholder="Agendar Agora">
            <span class="form-hint">üìù Texto que aparece no bot√£o principal (obrigat√≥rio)</span>
          </div>
          <div class="form-group">
            <label for="hero-cta-link">Link do Bot√£o <span style="color: red;">*</span></label>
            <input type="text" id="hero-cta-link" placeholder="#contato">
            <span class="form-hint">üîó Para se√ß√µes da p√°gina use #contato, #sobre, etc. Para links externos use https://... (obrigat√≥rio)</span>
          </div>
          <div class="form-group">
            <label for="hero-bg">URL da Imagem de Fundo <span style="color: red;">*</span></label>
            <input type="url" id="hero-bg" placeholder="https://... ou nome-da-imagem.jpg">
            <span class="form-hint">üñºÔ∏è <strong>Tamanho recomendado: 1920x1080px</strong> | <strong>Op√ß√£o 1:</strong> Cole uma URL de <a href="https://unsplash.com" target="_blank">Unsplash</a>, <a href="https://imgur.com" target="_blank">Imgur</a> ou <a href="https://postimages.org" target="_blank">PostImages</a> | <strong>Op√ß√£o 2 (LGPD):</strong> V√° na aba "Imagens", fa√ßa upload e cole o nome exato da imagem aqui (obrigat√≥rio)</span>
          </div>
        </div>

        <!-- About -->
        <div class="subsection">
          <h3 class="subsection-title">Sobre</h3>
          <div class="form-group">
            <label for="about-title">T√≠tulo <span style="color: red;">*</span></label>
            <input type="text" id="about-title" placeholder="Sobre mim">
            <span class="form-hint">üìù T√≠tulo da se√ß√£o "Sobre" (obrigat√≥rio)</span>
          </div>
          <div class="form-group">
            <label for="about-text">Texto <span style="color: red;">*</span></label>
            <textarea id="about-text" placeholder="Sou guia de montanha..."></textarea>
            <span class="form-hint">üìù Conte sua hist√≥ria, experi√™ncia e miss√£o (obrigat√≥rio)</span>
          </div>
          <div class="form-group">
            <label for="about-image">URL da Imagem <span style="color: red;">*</span></label>
            <input type="url" id="about-image" placeholder="https://... ou nome-da-imagem.jpg">
            <span class="form-hint">üñºÔ∏è <strong>Tamanho recomendado: 600x600px (quadrada)</strong> | <strong>Op√ß√£o 1:</strong> Cole uma URL de <a href="https://unsplash.com" target="_blank">Unsplash</a>, <a href="https://imgur.com" target="_blank">Imgur</a> ou <a href="https://postimages.org" target="_blank">PostImages</a> | <strong>Op√ß√£o 2 (LGPD):</strong> V√° na aba "Imagens", fa√ßa upload e cole o nome exato da imagem aqui (obrigat√≥rio)</span>
          </div>
        </div>

        <!-- Services -->
        <div class="subsection">
          <h3 class="subsection-title">Servi√ßos (m√°x. 3)</h3>
          <div id="services-list"></div>
          <button class="btn btn-secondary btn-small" id="add-service">+ Adicionar Servi√ßo</button>
        </div>

        <!-- Testimonials -->
        <div class="subsection">
          <h3 class="subsection-title">Depoimentos</h3>
          <div id="testimonials-list"></div>
          <button class="btn btn-secondary btn-small" id="add-testimonial">+ Adicionar Depoimento</button>
        </div>

        <!-- Gallery -->
        <div class="subsection">
          <h3 class="subsection-title">Galeria (m√°x. 6 imagens)</h3>
          <div id="gallery-list"></div>
          <button class="btn btn-secondary btn-small" id="add-gallery-image">+ Adicionar Imagem</button>
        </div>

        <!-- Contact -->
        <div class="subsection">
          <h3 class="subsection-title">Contato</h3>
          <div class="form-group">
            <label for="contact-whatsapp">WhatsApp (link) <span style="color: red;">*</span></label>
            <input type="url" id="contact-whatsapp" placeholder="https://wa.me/5511999999999">
            <span class="form-hint">üì± Formato: https://wa.me/55 + DDD + n√∫mero (sem espa√ßos ou tra√ßos) - obrigat√≥rio</span>
          </div>
          <div class="form-group">
            <label for="contact-email">Email <span style="color: red;">*</span></label>
            <input type="email" id="contact-email" placeholder="contato@aventura.com">
            <span class="form-hint">üìß Email para contato (obrigat√≥rio)</span>
          </div>
          <div class="form-group">
            <label for="contact-instagram">Instagram (link)</label>
            <input type="url" id="contact-instagram" placeholder="https://instagram.com/...">
            <span class="form-hint">üì∑ Link completo do perfil no Instagram (opcional)</span>
          </div>
          <div class="form-group">
            <label for="contact-location">Localiza√ß√£o <span style="color: red;">*</span></label>
            <input type="text" id="contact-location" placeholder="S√£o Paulo, Brasil">
            <span class="form-hint">üìç Cidade e estado onde voc√™ atua (obrigat√≥rio)</span>
          </div>
        </div>

        <!-- SEO -->
        <div class="subsection">
          <h3 class="subsection-title">SEO e Identidade</h3>
          <div class="form-group">
            <label for="site-name">Nome do Site <span style="color: red;">*</span></label>
            <input type="text" id="site-name" placeholder="Aventuras">
            <span class="form-hint">üè∑Ô∏è Nome que aparece no cabe√ßalho das p√°ginas internas e no menu (obrigat√≥rio)</span>
          </div>
          <div class="form-group">
            <label for="seo-title">T√≠tulo da P√°gina <span style="color: red;">*</span></label>
            <input type="text" id="seo-title" placeholder="Aventuras Guiadas com Seguran√ßa">
            <span class="form-hint">üîç Aparece na aba do navegador e no Google (m√°x. 60 caracteres) - obrigat√≥rio</span>
          </div>
          <div class="form-group">
            <label for="seo-description">Descri√ß√£o <span style="color: red;">*</span></label>
            <textarea id="seo-description" placeholder="Trilhas, escalada e mergulho..."></textarea>
            <span class="form-hint">üîç Aparece nos resultados do Google (m√°x. 160 caracteres) - obrigat√≥rio</span>
          </div>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" id="save-home">üíæ Salvar Home</button>
          <button class="btn btn-secondary" id="revert-home" title="Desfazer √∫ltima altera√ß√£o">‚Ü∫ Desfazer</button>
          <button class="btn btn-secondary" id="restore-default-home" title="Restaurar configura√ß√µes padr√£o do site">üîÑ Restaurar Padr√£o</button>
          <button class="btn btn-secondary" id="export-home">üì• Exportar JSON</button>
          <button class="btn btn-secondary" id="import-home">üì§ Importar JSON</button>
        </div>
      </div>

      <!-- Pages Section -->
      <div class="admin-section" id="section-pages">
        <div class="subsection">
          <h3 class="subsection-title">P√°ginas do Menu</h3>
          <div id="pages-list"></div>
          <button class="btn btn-primary" id="add-page">+ Nova P√°gina</button>
        </div>

        <!-- Page Form (hidden by default) -->
        <div class="subsection" id="page-form" style="display: none;">
          <h3 class="subsection-title" id="page-form-title">Nova P√°gina</h3>
          <div class="form-group">
            <label for="page-label">Label (nome no menu) <span style="color: red;">*</span></label>
            <input type="text" id="page-label" placeholder="Roteiros">
            <span class="form-hint">üìù Nome que aparecer√° no menu de navega√ß√£o (obrigat√≥rio)</span>
          </div>
          <div class="form-group">
            <label for="page-slug">Slug (URL) <span style="color: red;">*</span></label>
            <input type="text" id="page-slug" placeholder="roteiros">
            <span class="form-hint">üîó Endere√ßo da p√°gina (ex: roteiros ‚Üí site.com/p/#roteiros) - apenas letras min√∫sculas, n√∫meros e h√≠fens (obrigat√≥rio)</span>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="page-is-form"> Esta p√°gina √© um formul√°rio de inscri√ß√£o
            </label>
            <span class="form-hint">Marque se esta p√°gina ter√° um formul√°rio para inscri√ß√£o em aventuras</span>
          </div>
          
          <!-- Campos do Canva (aparecem quando N√ÉO √© formul√°rio) -->
          <div id="canva-fields">
            <div class="form-group">
              <label for="page-canva-url">URL do Canva (embed) <span style="color: red;">*</span></label>
              <input type="url" id="page-canva-url" placeholder="https://www.canva.com/design/...">
              <span class="form-hint">üé® <strong>Como obter:</strong> No Canva, clique em "Compartilhar" ‚Üí "Mais" ‚Üí "Incorporar" ‚Üí Copie o link que aparece. Deve come√ßar com https://www.canva.com/ (obrigat√≥rio)</span>
            </div>
          </div>
          
          <!-- Campos do Formul√°rio (aparecem quando √â formul√°rio) -->
          <div id="form-fields" style="display: none;">
            <div class="form-group">
              <label for="form-title">T√≠tulo do Formul√°rio <span style="color: red;">*</span></label>
              <input type="text" id="form-title" placeholder="Inscri√ß√£o para Trilha do Pico">
              <span class="form-hint">üìù T√≠tulo que aparece no topo do formul√°rio (obrigat√≥rio)</span>
            </div>
            <div class="form-group">
              <label for="form-description">Descri√ß√£o</label>
              <textarea id="form-description" placeholder="Preencha o formul√°rio abaixo para se inscrever..."></textarea>
              <span class="form-hint">üìù Instru√ß√µes para quem vai preencher o formul√°rio. As inscri√ß√µes aparecer√£o na aba "Inscri√ß√µes" do admin (opcional)</span>
            </div>

            <!-- Configura√ß√£o de Inscri√ß√£o em Grupo -->
            <div class="form-group">
              <label>
                <input type="checkbox" id="form-allow-multiple-participants"> Permitir inscri√ß√£o em grupo
              </label>
              <span class="form-hint">üë• Permite que usu√°rios inscrevam m√∫ltiplas pessoas em uma √∫nica submiss√£o (fam√≠lias, grupos, etc.)</span>
            </div>

            <!-- Campos de Grupo (aparecem quando permitir grupo est√° ativado) -->
            <div id="group-fields" style="display: none;">
              <div class="form-group">
                <label for="group-min-participants">M√≠nimo de participantes</label>
                <input type="number" id="group-min-participants" value="1" min="1" max="100">
                <span class="form-hint">üë• Quantidade m√≠nima de pessoas por inscri√ß√£o (normalmente 1)</span>
              </div>
              <div class="form-group">
                <label for="group-max-participants">M√°ximo de participantes</label>
                <input type="number" id="group-max-participants" value="10" min="1" max="100">
                <span class="form-hint">üë• Quantidade m√°xima de pessoas por inscri√ß√£o (recomendado: 10)</span>
              </div>
              <div class="form-group">
                <label>
                  <input type="checkbox" id="group-same-session" checked> Todos participantes na mesma bateria
                </label>
                <span class="form-hint">üîí Quando ativado, todos os participantes do grupo devem estar na mesma bateria/sess√£o</span>
              </div>
            </div>

            <div class="form-group">
              <label>
                <input type="checkbox" id="form-requires-payment"> Requer Pagamento (PIX)
              </label>
            </div>
            
            <!-- Campos de Pagamento (aparecem quando requer pagamento) -->
            <div id="payment-fields" style="display: none;">
              <div class="form-group">
                <label for="payment-value">Valor da Inscri√ß√£o (R$) <span style="color: red;">*</span></label>
                <input type="number" id="payment-value" placeholder="300.00" step="0.01" min="0">
                <span class="form-hint">üí∞ Valor em reais (ex: 300.00) - obrigat√≥rio se pagamento estiver ativado</span>
              </div>
              <div class="form-group">
                <label for="payment-pix-key">Chave PIX (Copia e Cola) <span style="color: red;">*</span></label>
                <textarea id="payment-pix-key" rows="3" placeholder="00020126580014BR.GOV.BCB.PIX..."></textarea>
                <span class="form-hint">üí≥ <strong>Como obter:</strong> Abra seu app banc√°rio ‚Üí PIX ‚Üí Receber ‚Üí Copiar c√≥digo PIX. Cole aqui o c√≥digo completo. O QR Code ser√° gerado automaticamente (obrigat√≥rio se pagamento estiver ativado)</span>
              </div>
              <div class="form-group">
                <label for="payment-whatsapp">WhatsApp para Pagamento com Cart√£o</label>
                <input type="text" id="payment-whatsapp" placeholder="5511999999999">
                <span class="form-hint">üì± N√∫mero para contato sobre pagamento com cart√£o. Formato: 55 + DDD + n√∫mero (sem espa√ßos) - Ex: 5511999999999 (opcional)</span>
              </div>
            </div>

            <!-- Limite de Vagas Manual (quando n√£o h√° sess√µes) -->
            <div class="form-group" id="form-max-participants-wrapper" style="display: none;">
              <label for="form-max-participants">Limite total de vagas</label>
              <input type="number" id="form-max-participants" value="0" min="0" placeholder="0 = ilimitado">
              <span class="form-hint">üë• N√∫mero m√°ximo de participantes. Use 0 para ilimitado. Este campo aparece quando N√ÉO h√° baterias/sess√µes.</span>
            </div>

            <h4 style="margin-top: var(--spacing-md); margin-bottom: var(--spacing-sm);">Campos do Formul√°rio</h4>
            <div id="form-fields-list"></div>
            <div class="form-group" id="form-total-capacity-wrapper" style="display: none;">
              <label>Total de vagas (calculado automaticamente)</label>
              <div class="session-total-summary" id="form-total-capacity-value">0</div>
              <span class="form-hint">üë• Somat√≥rio das vagas de todas as baterias deste formul√°rio.</span>
            </div>
            <button type="button" class="btn btn-secondary btn-small" id="add-form-field">+ Adicionar Campo</button>
          </div>
          
          <div class="form-group">
            <label for="page-order">Ordem</label>
            <input type="number" id="page-order" value="1" min="1">
          </div>
          <div class="form-group">
            <label for="page-seo-title">SEO - T√≠tulo</label>
            <input type="text" id="page-seo-title" placeholder="Roteiros de Aventura">
            <span class="form-hint">üîç T√≠tulo que aparece no Google (m√°x. 60 caracteres) - se vazio, usa o Label da p√°gina</span>
          </div>
          <div class="form-group">
            <label for="page-seo-desc">SEO - Descri√ß√£o</label>
            <textarea id="page-seo-desc" placeholder="Trilhas e expedi√ß√µes guiadas."></textarea>
            <span class="form-hint">üîç Descri√ß√£o que aparece no Google (m√°x. 160 caracteres) - opcional</span>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="page-active" checked> P√°gina ativa
            </label>
          </div>
          <div class="btn-group">
            <button class="btn btn-primary" id="save-page">üíæ Salvar P√°gina</button>
            <button class="btn btn-secondary" id="cancel-page">‚úï Cancelar</button>
          </div>
        </div>
      </div>

      <!-- Inscriptions Section -->
      <div class="admin-section" id="section-inscriptions">
        <div class="subsection">
          <h3 class="subsection-title">Gerenciamento de Inscri√ß√µes</h3>
          
          <!-- Estat√≠sticas -->
          <div class="inscriptions-stats">
            <div class="stat-card">
              <h4>Total de Inscri√ß√µes</h4>
              <p class="stat-number" id="total-inscriptions">0</p>
            </div>
            <div class="stat-card">
              <h4>Confirmadas</h4>
              <p class="stat-number" id="confirmed-inscriptions">0</p>
            </div>
            <div class="stat-card">
              <h4>Pendentes</h4>
              <p class="stat-number" id="pending-inscriptions">0</p>
            </div>
          </div>
          
          <!-- Filtros -->
          <div class="inscriptions-filters">
            <div class="form-group">
              <label for="filter-page">Filtrar por P√°gina</label>
              <select id="filter-page">
                <option value="">Todas as p√°ginas</option>
              </select>
            </div>
            <div class="form-group">
              <label for="filter-status">Filtrar por Status</label>
              <select id="filter-status">
                <option value="">Todos</option>
                <option value="pending">Pendente</option>
                <option value="confirmed">Confirmado</option>
              </select>
            </div>
            <div class="form-group">
              <input type="text" id="search-inscription" placeholder="Buscar por nome, email...">
            </div>
            <button class="btn btn-secondary" id="export-inscriptions">üì• Exportar CSV</button>
          </div>
          
          <!-- Lista de Inscri√ß√µes -->
          <div class="inscriptions-table-container">
            <table class="inscriptions-table" id="inscriptions-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Data</th>
                  <th>Nome</th>
                  <th>P√°gina</th>
                  <th>Status</th>
                  <th>A√ß√µes</th>
                </tr>
              </thead>
              <tbody id="inscriptions-tbody">
                <tr>
                  <td colspan="6" style="text-align: center; padding: 2rem;">
                    Nenhuma inscri√ß√£o ainda
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <!-- Modal de Detalhes da Inscri√ß√£o -->
      <div class="modal" id="inscription-modal">
        <div class="modal-content">
          <div class="modal-header">
            <h3>üìã Detalhes da Inscri√ß√£o</h3>
            <button class="modal-close" id="close-modal">√ó</button>
          </div>
          <div class="modal-body" id="modal-body">
            <!-- Conte√∫do ser√° preenchido dinamicamente -->
          </div>
        </div>
      </div>

      <!-- Images Section -->
      <div class="admin-section" id="section-images">
        <div class="subsection">
          <h3 class="subsection-title">üì∏ Gerenciamento de Imagens</h3>
          
          <!-- Info Box -->
          <div class="images-info-box">
            <h4>üîí Privacidade e LGPD</h4>
            <p><strong>Por que usar esta se√ß√£o?</strong> Se voc√™ n√£o quer hospedar suas imagens em sites p√∫blicos por quest√µes de privacidade ou LGPD, pode fazer upload aqui. As imagens ficam armazenadas na pasta <code>uploads/</code> do seu projeto.</p>
            <p><strong>Como usar:</strong></p>
            <ol style="margin: var(--spacing-xs) 0; padding-left: 20px;">
              <li>Fa√ßa upload das imagens clicando na √°rea abaixo ou arrastando arquivos</li>
              <li>Copie o nome da imagem clicando no bot√£o "üìã Copiar Nome"</li>
              <li>Cole o nome <strong>exatamente como aparece</strong> nos campos de URL da Home (ex: <code>hero-background.jpg</code>)</li>
              <li>O sistema vai buscar automaticamente a imagem da pasta uploads/</li>
            </ol>
            <p><strong>‚úÖ Vantagem:</strong> As imagens ficam salvas permanentemente no projeto, n√£o dependem do navegador!</p>
          </div>

          <!-- Upload Area -->
          <div class="images-upload-area" id="upload-area">
            <div class="upload-icon">üì§</div>
            <h3>Clique ou arraste imagens aqui</h3>
            <p style="color: var(--color-gray-dark); margin-top: var(--spacing-xs);">
              Formatos aceitos: JPG, PNG, GIF, WebP | Tamanho m√°ximo: 5MB por imagem
            </p>
            <input type="file" id="image-upload-input" accept="image/*" multiple style="display: none;">
          </div>

          <!-- Images Grid -->
          <div id="images-container">
            <h4 style="margin-bottom: var(--spacing-md);">Suas Imagens (<span id="images-count">0</span>)</h4>
            <div class="images-grid" id="images-grid">
              <!-- Imagens ser√£o renderizadas aqui -->
            </div>
          </div>

          <div class="btn-group" style="margin-top: var(--spacing-md);">
            <button class="btn btn-danger" id="clear-all-images">üóëÔ∏è Limpar Todas as Imagens</button>
          </div>
          <p style="margin-top: var(--spacing-sm); font-size: 0.875rem; color: var(--color-gray-dark);">
            üí° <strong>Dica:</strong> As imagens ficam salvas na pasta <code>uploads/</code> do projeto. Fa√ßa backup copiando essa pasta!
          </p>
        </div>
      </div>

      <!-- Theme Section -->
      <div class="admin-section" id="section-theme">
        <div class="subsection">
          <h3 class="subsection-title">Cores do Tema</h3>
          <div class="color-picker-group">
            <div class="color-picker-item">
              <label for="theme-primary">Prim√°ria</label>
              <input type="color" id="theme-primary" value="#0E7C7B">
            </div>
            <div class="color-picker-item">
              <label for="theme-secondary">Secund√°ria</label>
              <input type="color" id="theme-secondary" value="#F4A261">
            </div>
            <div class="color-picker-item">
              <label for="theme-text">Texto</label>
              <input type="color" id="theme-text" value="#1B1B1B">
            </div>
            <div class="color-picker-item">
              <label for="theme-bg">Fundo</label>
              <input type="color" id="theme-bg" value="#FAFAFA">
            </div>
          </div>
          <div class="btn-group">
            <button class="btn btn-primary" id="save-theme">üíæ Salvar Tema</button>
            <button class="btn btn-secondary" id="revert-theme">‚Ü∫ Reverter</button>
            <button class="btn btn-secondary" id="restore-default-theme" title="Restaurar cores padr√£o">üîÑ Restaurar Padr√£o</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Preview (Direita) -->
    <div class="admin-preview">
      <div class="preview-label" id="preview-label">
        <span>Preview:</span>
        <select id="preview-selector" style="margin-left: 10px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; background: white;">
          <option value="home">Home</option>
        </select>
      </div>
      <div class="preview-container">
        <iframe id="preview-frame" src="/index.html?preview=1"></iframe>
      </div>
    </div>
  </div>

  <input type="file" id="import-file-input" accept=".json" style="display: none;">
  <script>
    // Fun√ß√£o global para limpar cache e cookies
    window.clearSiteCache = function() {
      if (confirm('‚ö†Ô∏è ATEN√á√ÉO: Isso vai limpar TODOS os dados salvos localmente (incluindo p√°ginas, configura√ß√µes e inscri√ß√µes em cache) e recarregar a p√°gina.\n\nOs dados no Supabase N√ÉO ser√£o afetados.\n\nDeseja continuar?')) {
        try {
          // Limpar localStorage
          localStorage.clear();
          console.log('‚úÖ localStorage limpo');
          
          // Limpar sessionStorage
          sessionStorage.clear();
          console.log('‚úÖ sessionStorage limpo');
          
          // Limpar cookies
          document.cookie.split(";").forEach(function(c) { 
            document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
          });
          console.log('‚úÖ Cookies limpos');
          
          alert('‚úÖ Cache limpo com sucesso! A p√°gina ser√° recarregada.');
          
          // Recarregar a p√°gina
          window.location.reload(true);
        } catch (error) {
          console.error('Erro ao limpar cache:', error);
          alert('‚ùå Erro ao limpar cache. Tente recarregar a p√°gina manualmente (Ctrl+Shift+R ou Cmd+Shift+R).');
        }
      }
    };

    // Adicionar evento ao bot√£o de limpar cache quando o DOM estiver pronto
    document.addEventListener('DOMContentLoaded', function() {
      const clearCacheBtn = document.getElementById('clear-cache-btn');
      if (clearCacheBtn) {
        clearCacheBtn.addEventListener('click', function(e) {
          e.preventDefault();
          window.clearSiteCache();
        });
      }
    });

    // Carregar config de acordo com o ambiente e aguardar antes de carregar o admin.js
    (async () => {
      const configSrc = window.location.hostname === 'localhost' ? '/config.js' : '/api/config';
      
      try {
        await new Promise((resolve, reject) => {
          const configScript = document.createElement('script');
          configScript.src = configSrc;
          configScript.onload = resolve;
          configScript.onerror = reject;
          document.head.appendChild(configScript);
        });
        console.log('‚úÖ Config carregado com sucesso');
      } catch (error) {
        console.warn('‚ö†Ô∏è N√£o foi poss√≠vel carregar config. Usando valores padr√£o.');
        window.SUPABASE_URL = window.SUPABASE_URL || '';
        window.SUPABASE_ANON_KEY = window.SUPABASE_ANON_KEY || '';
      }
      
      // Agora carregar o admin.js
      const adminScript = document.createElement('script');
      adminScript.type = 'module';
      adminScript.src = '/assets/js/admin.js';
      document.body.appendChild(adminScript);
    })();
  </script>
</body>
</html>
